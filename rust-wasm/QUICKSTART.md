# 🚀 快速开始指南

## 一分钟启动

```bash
# 1. 进入项目目录
cd rust-wasm

# 2. 一键启动（自动编译和启动服务器）
chmod +x build.sh start-server.sh
./start-server.sh
```

## 访问示例

在浏览器中打开：

### 🎯 性能对比示例（推荐）
**URL**: http://localhost:8080/performance.html

**特点**：
- 4种复杂图形计算场景
- 实时 WASM vs JavaScript 性能对比
- 可调节参数测试不同场景
- 详细的性能指标显示

**推荐测试**：
1. 选择"粒子系统模拟"（性能差异最明显）
2. 画布尺寸选择"600 × 450"
3. 点击"🔄 开始性能对比"
4. 观察 WASM 比 JS 快 **5-8倍**！

### 📝 基础示例
**URL**: http://localhost:8080/index.html

**特点**：
- 斐波那契数列计算
- 质数检测
- Mandelbrot 分形渲染

## 性能对比操作指南

### 第一步：选择测试项目
- **Mandelbrot 分形**：经典分形，数学运算密集
- **Julia 分形**：美丽的分形图案
- **粒子系统**：200个粒子物理模拟（⭐推荐，差异最明显）
- **热扩散**：热传导模拟

### 第二步：设置参数
- **画布尺寸**：
  - 400×300 - 快速测试
  - 600×450 - 推荐，性能差异明显
  - 800×600 - 更大差异
  - 1000×750 - 最大差异

- **迭代次数**：
  - 50 - 快速
  - 100 - 推荐
  - 200+ - 更明显的性能差异

### 第三步：运行测试
点击按钮：
- **🔄 开始性能对比** - 同时运行两个版本并对比
- **⚡ 仅运行 WASM** - 只测试 WASM
- **📊 仅运行 JavaScript** - 只测试 JS

### 第四步：查看结果
- **性能汇总**（顶部）
  - WASM 耗时
  - JavaScript 耗时
  - 性能提升倍数
  - 时间节省百分比

- **详细统计**（每个画布下方）
  - 计算时间
  - 渲染时间
  - 总耗时

## 预期性能提升

| 场景 | 画布大小 | WASM | JavaScript | 提升 |
|------|---------|------|------------|------|
| Mandelbrot | 600×450 | ~20ms | ~90ms | **4-5倍** |
| Julia | 600×450 | ~20ms | ~90ms | **4-5倍** |
| 粒子系统 | 600×450 | ~40ms | ~280ms | **6-7倍** ⭐ |
| 热扩散 | 600×450 | ~25ms | ~110ms | **4-5倍** |

*实际数值取决于你的硬件和浏览器*

## 常见问题

### Q: 看不到性能差异？
**A**: 尝试以下方法：
1. 增大画布尺寸（选择 800×600 或 1000×750）
2. 增加迭代次数（设置为 200+）
3. 选择"粒子系统"测试（计算最密集）
4. 确保使用的是编译后的 Release 版本

### Q: 页面显示 WASM 加载失败？
**A**: 
1. 确保已运行 `./build.sh` 编译 WASM
2. 必须使用 HTTP 服务器，不能直接打开 HTML 文件
3. 检查浏览器控制台的具体错误信息

### Q: 想修改代码？
**A**:
1. 编辑 `src/lib.rs` (Rust 代码)
2. 运行 `./build.sh` 重新编译
3. 刷新浏览器页面

### Q: 如何添加自己的算法？
**A**:
1. 在 `src/lib.rs` 中添加新的 `#[wasm_bindgen]` 函数
2. 在 `performance.js` 中添加对应的 JavaScript 实现
3. 在 `performance.html` 中添加新的测试选项
4. 重新编译并测试

## 技术细节

### WASM 编译优化
- ✅ `--release` 模式（完全优化）
- ✅ `wasm-opt` 优化（减小体积和提升速度）
- ✅ LLVM 深度优化
- ✅ 静态类型和零成本抽象

### JavaScript 优化
- ✅ TypedArray (Float64Array, Uint8ClampedArray)
- ✅ 避免动态类型
- ✅ 算法与 WASM 完全一致
- ✅ 最小化对象创建

## 下一步

1. ✅ 尝试所有4种测试场景
2. ✅ 调整参数观察性能变化
3. ✅ 查看浏览器控制台的详细日志
4. ✅ 阅读 [PERFORMANCE_COMPARISON.md](./PERFORMANCE_COMPARISON.md) 深入了解
5. ✅ 尝试修改代码添加自己的算法

## 学到了什么？

通过这个示例，你应该了解：
- ✅ WebAssembly 在计算密集型任务中有显著性能优势
- ✅ WASM 通常比 JavaScript 快 **2-8倍**
- ✅ 如何使用 Rust 编写和编译 WASM 模块
- ✅ 如何在 JavaScript 中调用 WASM 函数
- ✅ 如何进行公平的性能测试和对比
- ✅ 复杂算法的实现（分形、物理模拟等）

---

**享受 WebAssembly 的强大性能！** 🚀


